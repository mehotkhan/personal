(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{547:function(e,t,n){var s={"./af":387,"./af.js":387,"./ar":388,"./ar-dz":389,"./ar-dz.js":389,"./ar-kw":390,"./ar-kw.js":390,"./ar-ly":391,"./ar-ly.js":391,"./ar-ma":392,"./ar-ma.js":392,"./ar-sa":393,"./ar-sa.js":393,"./ar-tn":394,"./ar-tn.js":394,"./ar.js":388,"./az":395,"./az.js":395,"./be":396,"./be.js":396,"./bg":397,"./bg.js":397,"./bm":398,"./bm.js":398,"./bn":399,"./bn-bd":400,"./bn-bd.js":400,"./bn.js":399,"./bo":401,"./bo.js":401,"./br":402,"./br.js":402,"./bs":403,"./bs.js":403,"./ca":404,"./ca.js":404,"./cs":405,"./cs.js":405,"./cv":406,"./cv.js":406,"./cy":407,"./cy.js":407,"./da":408,"./da.js":408,"./de":409,"./de-at":410,"./de-at.js":410,"./de-ch":411,"./de-ch.js":411,"./de.js":409,"./dv":412,"./dv.js":412,"./el":413,"./el.js":413,"./en-au":414,"./en-au.js":414,"./en-ca":415,"./en-ca.js":415,"./en-gb":416,"./en-gb.js":416,"./en-ie":417,"./en-ie.js":417,"./en-il":418,"./en-il.js":418,"./en-in":419,"./en-in.js":419,"./en-nz":420,"./en-nz.js":420,"./en-sg":421,"./en-sg.js":421,"./eo":422,"./eo.js":422,"./es":423,"./es-do":424,"./es-do.js":424,"./es-mx":425,"./es-mx.js":425,"./es-us":426,"./es-us.js":426,"./es.js":423,"./et":427,"./et.js":427,"./eu":428,"./eu.js":428,"./fa":429,"./fa.js":429,"./fi":430,"./fi.js":430,"./fil":431,"./fil.js":431,"./fo":432,"./fo.js":432,"./fr":433,"./fr-ca":434,"./fr-ca.js":434,"./fr-ch":435,"./fr-ch.js":435,"./fr.js":433,"./fy":436,"./fy.js":436,"./ga":437,"./ga.js":437,"./gd":438,"./gd.js":438,"./gl":439,"./gl.js":439,"./gom-deva":440,"./gom-deva.js":440,"./gom-latn":441,"./gom-latn.js":441,"./gu":442,"./gu.js":442,"./he":443,"./he.js":443,"./hi":444,"./hi.js":444,"./hr":445,"./hr.js":445,"./hu":446,"./hu.js":446,"./hy-am":447,"./hy-am.js":447,"./id":448,"./id.js":448,"./is":449,"./is.js":449,"./it":450,"./it-ch":451,"./it-ch.js":451,"./it.js":450,"./ja":452,"./ja.js":452,"./jv":453,"./jv.js":453,"./ka":454,"./ka.js":454,"./kk":455,"./kk.js":455,"./km":456,"./km.js":456,"./kn":457,"./kn.js":457,"./ko":458,"./ko.js":458,"./ku":459,"./ku.js":459,"./ky":460,"./ky.js":460,"./lb":461,"./lb.js":461,"./lo":462,"./lo.js":462,"./lt":463,"./lt.js":463,"./lv":464,"./lv.js":464,"./me":465,"./me.js":465,"./mi":466,"./mi.js":466,"./mk":467,"./mk.js":467,"./ml":468,"./ml.js":468,"./mn":469,"./mn.js":469,"./mr":470,"./mr.js":470,"./ms":471,"./ms-my":472,"./ms-my.js":472,"./ms.js":471,"./mt":473,"./mt.js":473,"./my":474,"./my.js":474,"./nb":475,"./nb.js":475,"./ne":476,"./ne.js":476,"./nl":477,"./nl-be":478,"./nl-be.js":478,"./nl.js":477,"./nn":479,"./nn.js":479,"./oc-lnc":480,"./oc-lnc.js":480,"./pa-in":481,"./pa-in.js":481,"./pl":482,"./pl.js":482,"./pt":483,"./pt-br":484,"./pt-br.js":484,"./pt.js":483,"./ro":485,"./ro.js":485,"./ru":486,"./ru.js":486,"./sd":487,"./sd.js":487,"./se":488,"./se.js":488,"./si":489,"./si.js":489,"./sk":490,"./sk.js":490,"./sl":491,"./sl.js":491,"./sq":492,"./sq.js":492,"./sr":493,"./sr-cyrl":494,"./sr-cyrl.js":494,"./sr.js":493,"./ss":495,"./ss.js":495,"./sv":496,"./sv.js":496,"./sw":497,"./sw.js":497,"./ta":498,"./ta.js":498,"./te":499,"./te.js":499,"./tet":500,"./tet.js":500,"./tg":501,"./tg.js":501,"./th":502,"./th.js":502,"./tk":503,"./tk.js":503,"./tl-ph":504,"./tl-ph.js":504,"./tlh":505,"./tlh.js":505,"./tr":506,"./tr.js":506,"./tzl":507,"./tzl.js":507,"./tzm":508,"./tzm-latn":509,"./tzm-latn.js":509,"./tzm.js":508,"./ug-cn":510,"./ug-cn.js":510,"./uk":511,"./uk.js":511,"./ur":512,"./ur.js":512,"./uz":513,"./uz-latn":514,"./uz-latn.js":514,"./uz.js":513,"./vi":515,"./vi.js":515,"./x-pseudo":516,"./x-pseudo.js":516,"./yo":517,"./yo.js":517,"./zh-cn":518,"./zh-cn.js":518,"./zh-hk":519,"./zh-hk.js":519,"./zh-mo":520,"./zh-mo.js":520,"./zh-tw":521,"./zh-tw.js":521};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id=547},550:function(e,t,n){},593:function(e,t,n){"use strict";n(550)},646:function(e,t,n){"use strict";n.r(t);var s=n(36),r=(n(88),n(12),n(14),n(17),n(591),n(549),n(545),n(209),n(226),n(384),n(55),n(385),n(90),n(386),n(91),n(525)),a=n.n(r),i=n(546);i.locale("fa-IR");var u={name:"p2pContact",mounted:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.user=e.$gun.user().recall({sessionStorage:!0});case 1:case"end":return t.stop()}}),t)})))()},computed:{orderBydate:function(){return a.a.orderBy(this.voiceList,"date",["desc"])}},data:function(){return{voiceList:[],loggedIN:!1,recording:!1,recorder:null,user:null,counter:3,file:null,items:[],playingItem:null,currentTime:null,owner_pub:"5nkDFG7Tkj-rAiMBz1ls5vUV9buM_R-E71zm0WPoeiw.uiPPbqeM5q9ZLwIxnTgflWOH3WoJgHQ0Rd_e3D013c4"}},methods:{getME:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"Wy_J4WC966IkwXeu6sZv4Nc2Y5dPQB7acKVW4sA9HXE.hdkqURPAys78Zq94I_016BYfB8XXSqwRmoXyK3h4gv4",t.next=3,e.$gun.user("Wy_J4WC966IkwXeu6sZv4Nc2Y5dPQB7acKVW4sA9HXE.hdkqURPAys78Zq94I_016BYfB8XXSqwRmoXyK3h4gv4");case 3:return n=t.sent,r=e.$gun.user(),t.next=7,e.$gun.user().get("voice-mail").once((function(e,t){Object(s.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.t0=SEA,t.t1=e,t.next=5,SEA.secret(n.epub,r._.sea);case 5:return t.t2=t.sent,t.next=8,t.t0.decrypt.call(t.t0,t.t1,t.t2);case 8:s=t.sent,console.log(s);case 10:case"end":return t.stop()}}),t)})))()}));case 7:case"end":return t.stop()}}),t)})))()},sendME:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,s,r,a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$gun.user(),s=n._.sea,t.next=4,e.$gun.user(e.owner_pub);case 4:return r=t.sent,a=r.epub,t.t0=SEA,t.next=9,SEA.secret(a,s);case 9:return t.t1=t.sent,t.next=12,t.t0.encrypt.call(t.t0,"shared data",t.t1);case 12:return i=t.sent,t.next=15,e.$gun.get("global-config").get("inbox").get("cert").then();case 15:return u=t.sent,t.next=18,e.$gun.get("~"+e.owner_pub).get("inbox").get(s.epub).set(i,console.log,{opt:{cert:u}});case 18:case"end":return t.stop()}}),t)})))()},adminLoad:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$gun.user(),t.next=3,SEA.certify("*",{"*":"voice-mail",".":"*"},n._.sea);case 3:return s=t.sent,t.next=6,e.$gun.get("global-config").get("voice-mail").get("cert").put(s);case 6:case"end":return t.stop()}}),t)})))()},loadVoices:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"an1fr61SYFeEpFnwbHHpN-Xdos8qBXSv5rUQOQ6H3z4.phpIpA6RNEflE3s35Oiiqmu9QBOObAxVygby4ChDjLE",t.next=3,e.$gun.user("an1fr61SYFeEpFnwbHHpN-Xdos8qBXSv5rUQOQ6H3z4.phpIpA6RNEflE3s35Oiiqmu9QBOObAxVygby4ChDjLE");case 3:return n=t.sent,r=e.$gun.user(),a=e,t.next=8,e.user.get("voice-mail-test1").map().once((function(e){Object(s.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=SEA,t.t1=e,t.next=4,SEA.secret(n.epub,r._.sea);case 4:return t.t2=t.sent,t.next=7,t.t0.decrypt.call(t.t0,t.t1,t.t2);case 7:(s=t.sent)&&s.date&&s.data&&a.voiceList.push(s);case 9:case"end":return t.stop()}}),t)})))()}));case 8:case"end":return t.stop()}}),t)})))()},playVoice:function(e){var t=this;return Object(s.a)(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(s=document.querySelector(".voice_"+e+" audio")).paused?(t.playingItem=e,s.play()):(t.playingItem=null,s.pause());case 2:case"end":return n.stop()}}),n)})))()},startRecording:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r,a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$gun.get("global-config").get("voice-mail").get("cert").then();case 2:return n=t.sent,r=e.$gun.user(),a=r._.sea,t.next=7,e.$gun.user(e.owner_pub);case 7:i=t.sent,u=i.epub,e.file=null,e.recording=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.items=[],e.recorder=new MediaRecorder(t),window.localStream=t,e.recorder.ondataavailable=function(t){e.items.push(t.data)},e.recorder.onstop=function(t){var r=new Blob(e.items,{type:"audio/ogg; codecs=opus"});e.file=URL.createObjectURL(r);var i=e;e.blobToBase64(r).then((function(t){Object(s.a)(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=SEA,s.t1={data:t,date:Date.now()},s.next=4,SEA.secret(u,a);case 4:return s.t2=s.sent,s.next=7,s.t0.encrypt.call(s.t0,s.t1,s.t2);case 7:return r=s.sent,s.next=10,e.$gun.get("~"+e.owner_pub).get("voice-mail").get(a.epub).set(r,(function(e){e.ok&&(console.log("پیام صوتی شما ارسال شد."),i.userAllert="پیام صوتی شما ارسال شد.")}),{opt:{cert:n}});case 10:case"end":return s.stop()}}),s)})))()}))},e.recorder.start()}));case 13:case"end":return t.stop()}}),t)})))()},stopRecording:function(){this.counter=3,this.recording=!1,this.recorder.stop(),window.localStream.getTracks()[0].stop()},countDownTimer:function(){var e=this;this.counter>0&&setTimeout((function(){e.counter-=1,e.countDownTimer()}),1e3),0===this.counter&&this.startRecording()},blobToBase64:function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},persian_number:function(e){var t=e.toString(),n="۰۱۲۳۴۵۶۷۸۹".split(""),s=t.replace(/\d/g,(function(e){return n[parseInt(e)]}));return s},persian_date:function(e){return i(e).fromNow()}}},o=(n(593),n(22)),c=Object(o.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",class:{"uk-button-primary":!e.recording,"uk-button-danger":e.recording},on:{mousedown:e.countDownTimer,mouseup:e.stopRecording}},[e._v("\n      "+e._s(e.recording?"در حال ضبط صدا...":"برای ضبط صدا "+this.persian_number(this.counter)+"  ثانیه نگه دارید .")+"\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.adminLoad}},[e._v("\n      admin Load\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.sendME}},[e._v("\n      Send ME\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.getME}},[e._v("\n      get ME\n    ")])]),e._v(" "),n("p",{staticClass:"uk-text-meta"},[e._v("\n    برای تماس مستقیم با من می توانید پیام صوتی بگذارید.\n  ")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"uk-margin-small-top uk-timeline"},e._l(e.orderBydate,(function(t){return n("div",{key:t.date,staticClass:"uk-timeline-item",class:"voice_"+t.date,attrs:{tabindex:"-1"}},[n("div",{staticClass:"uk-timeline-content"},[n("div",{staticClass:"\n            uk-card\n            uk-card-small\n            uk-card-default\n            uk-margin-small-bottom\n            uk-overflow-auto\n          "},[n("div",{staticClass:"uk-card-header uk-background-muted"},[n("div",{staticClass:"uk-grid-small uk-flex-middle",attrs:{"uk-grid":""}},[n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v("\n                "+e._s(e.persian_number(e.persian_date(t.date)))+"\n              ")]),e._v(" "),n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v(" محمد ابراهیمی ")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-success uk-margin-auto-right"},[e._v("درخواست مشاوره")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-alert uk-margin-small-right"},[e._v("جدید")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-alert uk-margin-small-right"},[e._v("پاسخ دادن")])])]),e._v(" "),n("div",{staticClass:"uk-card-body uk-padding-small"},[t.data?n("av-waveform",{staticClass:"uk-width-1-1",attrs:{"canv-width":500,"audio-controls":!1,"line-width":4,"noplayed-line-color":"#39f","playtime-line-width":5,"playtime-clickable":!0,"audio-src":t.data}}):e._e()],1),e._v(" "),n("div",{staticClass:"uk-card-footer"},[n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v("\n              "+e._s(e.persian_number(e.persian_date(t.date)))+" پاسخ داده شد.\n            ")]),e._v(" "),n("span",{staticClass:"\n                uk-label\n                uk-label-alert\n                uk-margin-small-right\n                uk-padding-small-top\n              ",on:{click:function(n){return e.playVoice(t.date)}}},[e.playingItem!==t.date?n("span",{attrs:{"uk-icon":"play"}}):e._e(),e._v(" "),e.playingItem==t.date?n("span",{attrs:{"uk-icon":"close"}}):e._e()]),e._v(" "),t.data?n("av-waveform",{staticClass:"uk-padding-small uk-margin-small-top",attrs:{"canv-width":500,"audio-controls":!1,"line-width":4,"noplayed-line-color":"#39f","playtime-line-width":5,"playtime-clickable":!0,"audio-src":t.data}}):e._e()],1)])]),e._v(" "),n("div",{staticClass:"uk-timeline-icon"},[n("span",{staticClass:"uk-badge",on:{click:function(n){return e.playVoice(t.date)}}},[e.playingItem!==t.date?n("span",{attrs:{"uk-icon":"play"}}):e._e(),e._v(" "),e.playingItem==t.date?n("span",{attrs:{"uk-icon":"close"}}):e._e()])])])})),0)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-margin"},[t("select",{staticClass:"uk-select"},[t("option",[this._v("سفارش کار")]),this._v(" "),t("option",[this._v("درخواست مشاوره")]),this._v(" "),t("option",[this._v("عمومی")])])])}],!1,null,"e2351096",null);t.default=c.exports}}]);